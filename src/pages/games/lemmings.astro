---
import DesktopLayout from '../../layouts/DesktopLayout.astro';
import Window from '../../components/Window.astro';
---
<DesktopLayout title="Lemmings â€” Real Serious Business">
  <Window title="Lemmings" icon="/icons/win98/users_green.ico" path="/games/lemmings" backHref="/games" defaultWidth={820} defaultHeight={560} defaultX={40} defaultY={20} noBodyScroll={true}>
    <div style="background:#000;width:100%;height:100%;overflow:hidden;position:relative;">
      <canvas
        width="800"
        height="480"
        id="gameCanvas"
        style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);max-width:100%;max-height:100%;object-fit:contain;image-rendering:pixelated;display:block;"
      ></canvas>
      <span
        id="levelName"
        style="position:absolute;bottom:32px;left:8px;color:white;font-size:13px;font-family:monospace;pointer-events:none;z-index:2;"
      ></span>
      <img
        src="/games/lemmings/img/arrow_l.png"
        alt="Previous level"
        onclick="if(window.lemmings)window.lemmings.moveToLevel(-1)"
        style="position:absolute;bottom:8px;left:8px;cursor:pointer;opacity:0.8;z-index:2;touch-action:manipulation;"
      />
      <img
        src="/games/lemmings/img/arrow_r.png"
        alt="Next level"
        onclick="if(window.lemmings)window.lemmings.moveToLevel(1)"
        style="position:absolute;bottom:8px;right:8px;cursor:pointer;opacity:0.8;z-index:2;touch-action:manipulation;"
      />
    </div>
  </Window>
</DesktopLayout>

<script is:inline src="/games/lemmings/js/jquery.js"></script>
<script is:inline src="/games/lemmings/js/lemmings.js"></script>
<script is:inline>
  window.addEventListener('load', function () {
    window.lemmings = new Lemmings.GameView();
    // Override the default "./" base path with an absolute path so it works
    // regardless of whether the browser URL has a trailing slash.
    window.lemmings.gameFactory = new Lemmings.GameFactory('/games/lemmings/');
    window.lemmings.elementLevelName = document.getElementById('levelName');
    window.lemmings.gameCanvas       = document.getElementById('gameCanvas');
    window.lemmings.setup();
  });
</script>
